@page
@using game_queue_front.Service;
@using game_queue_front.Pages;
@inject Microsoft.AspNetCore.Hosting.IWebHostEnvironment env;
@model MatchesModel
@{

    var mapsPath = "./static/maps.json";
    var playersPath = "./static/players.json";
    var matchesPath = "./static/matches.json";

    if (StaticDataProvider.Instance == null) {
        StaticDataProvider.InstantiateMatches(
            env.WebRootFileProvider.GetFileInfo(mapsPath).PhysicalPath,
            env.WebRootFileProvider.GetFileInfo(playersPath).PhysicalPath,
            env.WebRootFileProvider.GetFileInfo(matchesPath).PhysicalPath
        );
    }

    Console.WriteLine("Init done");
}

<div class="container text-center">
    <h5>Matches:</h5>
    <form method="post" >
        <label for="MapName">Map name:</label>
        <input type="text" id="FilterMapName" name="FilterMapName" />
        <label for="MapPrice">Map price:</label>
        <input type="text" id="FilterMapPrice" name="FilterMapPrice" />
        <input type="submit" value="Filter" class="submit" />
    </form>
    <div class="row">
        @foreach (var match in StaticDataProvider.Instance.Matches) {
            <div class="col mb-3 mb-sm-0">
                <div class="card" style="width: 22rem;">
                    <img class="card-img-top" src="@match.Map.CoverImageUrl" alt="Minimap image">
                    <div class="card-body">
                        <h5 class="card-title">@match.ToString()</h5>
                        <a href="Matches/@match.Id/" class="btn btn-primary">More details</a>
                    </div>
                </div>
            </div>
        }
    </div>
</div>